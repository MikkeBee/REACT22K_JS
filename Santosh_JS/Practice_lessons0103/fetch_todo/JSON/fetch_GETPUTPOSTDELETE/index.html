<!DOCTYPE html>
<html>
  <body>
    <h1>Get hands on with JavaScript's Fetch API</h1>
    <p>
      Write your requests in the script and watch the console and network logs.
    </p>

    <script>
      // GET retrieve all to-do's
      // fetch("https://jsonplaceholder.typicode.com/todos");

      // class FetchWrapper {
      //   //TODO
      //   constructor(baseURL) {
      //     this.baseURL = baseURL;
      //   }
      //   get(endpoint) {
      //     return fetch(this.baseURL + endpoint).then((response) =>
      //       response.json()
      //     );
      //   }
      // }

      // const API = new FetchWrapper("https://jsonplaceholder.typicode.com");
      // API.get("/todos").then((data) => {
      //   console.log(data);
      //   const userIdentity = data.filter((item) => item.id === 5);
      //   console.log(userIdentity);
      // });

      // will return all resources

      // GET retrieves the to-do with specific URI (in this case id = 5)

      /* will return this specific resource:
              {
                  "userId": 1,
                  "id": 5,
                  "title": "laboriosam mollitia et enim quasi adipisci quia provident illum",
                  "completed": false
              }
              */

      // POST adds a random id to the object sent

      fetch("https://jsonplaceholder.typicode.com/todos/", {
        method: "POST", // or PUT or DELETE
        body: JSON.stringify({
          userId: 1,
          title: "clean room",
          completed: false,
          id: 201,
        }),
        headers: {
          "Content-type": "application/json; charset=UTF-8",
        },
      })
        .then((response) => response.json())
        .then((data) => {
          console.log(data); // read server response
        });

      /* will return
              {
                  "userId": 1,
                  "title": "clean room",
                  "completed": false,
                  "id": 201
              }
              */

      // PUT to the resource with id = 5 to change the name of task

      fetch("https://jsonplaceholder.typicode.com/todos/5", {
        method: "PUT", // or PUT or DELETE
        body: JSON.stringify({
          title: "hello task",
        }),
        headers: {
          "Content-type": "application/json; charset=UTF-8",
        },
      })
        .then((response) => response.json())
        .then((data) => {
          console.log(data); // read server response
        });

      /* will return
              {
                  "userId": 1,
                  "id": 5,
                  "title": "hello task",
                  "completed": false
              }
              */

      // PATCH to the resource id = 1
      // update that task is completed

      fetch("https://jsonplaceholder.typicode.com/todos/1", {
        method: "PATCH", // or PUT or DELETE
        body: JSON.stringify({
          userId: 1,
          id: 1,
          title: "delectus aut autem",
          completed: true,
        }),
        headers: {
          "Content-type": "application/json; charset=UTF-8",
        },
      })
        .then((response) => response.json())
        .then((data) => {
          console.log(data); // read server response
        });

      /* will return
              {
                  "userId": 1,
                  "id": 1,
                  "title": "delectus aut autem",
                  "completed": true
              }
              */

      // DELETE task with id = 1

      fetch("https://jsonplaceholder.typicode.com/todos/1", {
        method: "DELETE", // or PUT or DELETE
        body: JSON.stringify({}),
        headers: {
          "Content-type": "application/json; charset=UTF-8",
        },
      })
        .then((response) => response.json())
        .then((data) => {
          console.log(data); // read server response
        });

      // empty response: {}
    </script>
  </body>
</html>
